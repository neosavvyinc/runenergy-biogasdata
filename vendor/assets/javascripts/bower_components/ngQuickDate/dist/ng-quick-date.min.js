(function(){var a;a=angular.module("ngQuickDate",[]),a.provider("ngQuickDateDefaults",function(){return this.options={dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"X",nextLinkHtml:"Next",prevLinkHtml:"Prev",disableTimepicker:!1,disableClearButton:!1,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],parseDateFunction:function(a){var b;return b=Date.parse(a),isNaN(b)?null:new Date(b)}},this.$get=function(){return this.options},this.set=function(a,b){var c,d,e;if("object"==typeof a){e=[];for(c in a)d=a[c],e.push(this.options[c]=d);return e}return this.options[a]=b}}),a.directive("datepicker",["ngQuickDateDefaults","$filter",function(a,b){return{restrict:"E",require:"ngModel",scope:{ngModel:"=",onChange:"&"},replace:!0,link:function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p;return i=e.debug&&e.debug.length,k=function(){return c.toggleCalendar(!1),c.weeks=[],c.inputDate=null,"string"==typeof c.ngModel&&(c.ngModel=l(c.ngModel)),o(),p(),m()},o=function(){var b,d;for(b in a)d=a[b],c[b]=!b.match(/html/)&&e[b]&&e[b].length?e[b]:a[b];return c.labelFormat||(c.labelFormat=c.dateFormat,c.disableTimepicker||(c.labelFormat+=" "+c.timeFormat)),e.iconClass&&e.iconClass.length?c.buttonIconHtml="<i ng-show='iconClass' class='"+e.iconClass+"'></i>":void 0},g=!1,window.document.addEventListener("click",function(){return g||(c.toggleCalendar(!1),c.$apply()),g=!1}),angular.element(d[0])[0].addEventListener("click",function(){return g=!0}),p=function(){return c.ngModel?(c.inputDate=b("date")(c.ngModel,a.dateFormat),c.inputTime=b("date")(c.ngModel,a.timeFormat)):(c.inputDate=null,c.inputTime=null)},m=function(){var a;return a=c.ngModel?new Date(c.ngModel):new Date,"Invalid Date"===a.toString()&&(a=new Date),a.setDate(1),c.calendarDate=new Date(a)},n=function(){var a,b,d,e,f,g,i,k,l,m,n,o,p;for(g=c.calendarDate.getDay(),e=j(c.calendarDate.getFullYear(),c.calendarDate.getMonth()),f=Math.ceil((g+e)/7),m=[],a=new Date(c.calendarDate),a.setDate(a.getDate()+-1*g),i=n=0,p=f-1;p>=0?p>=n:n>=p;i=p>=0?++n:--n)for(m.push([]),d=o=0;6>=o;d=++o)b=new Date(a),k=c.ngModel&&b&&h(b,c.ngModel),l=h(b,new Date),m[i].push({date:b,selected:k,other:b.getMonth()!==c.calendarDate.getMonth(),today:l}),a.setDate(a.getDate()+1);return c.weeks=m},f=function(a,c){return b("date")(a,c)},l=a.parseDateFunction,h=function(a,b,c){return null==c&&(c=!1),c?a-b===0:a&&b&&a.getYear()===b.getYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},j=function(a,b){return[31,a%4===0&&a%100!==0||a%400===0?29:28,31,30,31,30,31,31,30,31,30,31][b]},c.$watch("ngModel",function(a,b){return a!==b?(p(),m()):void 0}),c.$watch("calendarDate",function(a,b){return a!==b?n():void 0}),c.$watch("calendarShown",function(){var a;return a=angular.element(d[0].querySelector(".quickdate-date-input"))[0],a.select()}),c.mainButtonStr=function(){return c.ngModel?b("date")(c.ngModel,c.labelFormat):c.placeholder},c.toggleCalendar=function(a){return c.calendarShown=isFinite(a)?a:!c.calendarShown},c.setDate=function(a,b){var d;return null==b&&(b=!0),d=!c.ngModel&&a||c.ngModel&&!a||a.getTime()!==c.ngModel.getTime(),c.ngModel=a,c.toggleCalendar(!1),d&&c.onChange?c.onChange():void 0},c.setDateFromInput=function(a){var b,d,e,f;null==a&&(a=!1);try{if(d=l(c.inputDate),!d)throw"Invalid Date";if(!c.disableTimepicker&&c.inputTime&&c.inputTime.length&&d){if(f=c.disableTimepicker?"00:00:00":c.inputTime,e=l(""+c.inputDate+" "+f),!e)throw"Invalid Time";c.setDate(e,!1)}else c.setDate(d,!1);return a&&c.toggleCalendar(!1),c.inputDateErr=!1,c.inputTimeErr=!1}catch(g){if(b=g,"Invalid Date"===b)return c.inputDateErr=!0;if("Invalid Time"===b)return c.inputTimeErr=!0}},c.onDateInputTab=function(){return c.disableTimepicker&&c.toggleCalendar(!1),!0},c.onTimeInputTab=function(){return c.toggleCalendar(!1),!0},c.nextMonth=function(){return c.calendarDate=new Date(new Date(c.calendarDate).setMonth(c.calendarDate.getMonth()+1))},c.prevMonth=function(){return c.calendarDate=new Date(new Date(c.calendarDate).setMonth(c.calendarDate.getMonth()-1))},c.clear=function(){return c.ngModel=null,c.toggleCalendar(!1)},k(),n(),i?console.log("quick date scope:",c):void 0},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar(true)' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html-unsafe='buttonIconHtml'></div>{{mainButtonStr()}}</a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html-unsafe='closeButtonHtml'></div></a>\n    <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper'>\n        <label>Date</label>\n        <input class='quickdate-date-input' name='inputDate' type='text' ng-model='inputDate' placeholder='1/1/2013' ng-blur=\"setDateFromInput()\" ng-enter=\"setDateFromInput(true)\" ng-class=\"{'ng-quick-date-error': inputDateErr}\"  ng-tab='onDateInputTab()' />\n      </div>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time</label>\n        <input class='quickdate-time-input' name='inputTime' type='text' ng-model='inputTime' placeholder='12:00 PM' ng-blur=\"setDateFromInput(false)\" ng-enter=\"setDateFromInput(true)\" ng-class=\"{'quickdate-error': inputTimeErr}\" ng-tab='onTimeInputTab()'>\n      </div>\n    </div>\n    <div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html-unsafe='prevLinkHtml'></div></a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html-unsafe='nextLinkHtml'></div></a>\n    </div>\n    <table class='quickdate-calendar'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='setDate(day.date)' ng-class='{\"other-month\": day.other, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class='quickdate-popup-footer'>\n      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>\n    </div>\n  </div>\n</div>"}}]),a.directive("ngEnter",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 13===b.which?(a.$apply(c.ngEnter),b.preventDefault()):void 0})}}),a.directive("ngTab",function(){return function(a,b,c){return b.bind("keydown keypress",function(b){return 9===b.which?a.$apply(c.ngTab):void 0})}}),parseInt(angular.version.full)<1.2&&(a.directive("ngBlur",["$parse",function(a){return function(b,c,d){var e;return e=a(d.ngBlur),c.bind("blur",function(a){return b.$apply(function(){return e(b,{$event:a})})})}}]),a.directive("ngFocus",["$parse",function(a){return function(b,c,d){var e;return e=a(d.ngFocus),c.bind("focus",function(a){return b.$apply(function(){return e(b,{$event:a})})})}}]))}).call(this);